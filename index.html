<!-- DEPLOY MARKER: v9 -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For You üíó</title>

  <style>
    :root { --yesScale: 1; }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at top, #ffe6f0, #fff);
      overflow:hidden;
    }

    /* Moving fairy background */
    .fairies{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:0;
      overflow:hidden;
    }
    .fairy{
      position:absolute;
      bottom:-60px;
      font-size:28px;
      opacity:.7;
      animation: floatUp linear infinite;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.12));
    }
    @keyframes floatUp{
      from { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0; }
      12% { opacity: .75; }
      to { transform: translateY(-120vh) translateX(55px) rotate(14deg); opacity: 0; }
    }

    /* Main card behind modals */
    .card{
      position:relative;
      z-index:1;
      background: rgba(255,255,255,.9);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,45,85,.18);
      padding:20px 18px;
      border-radius:18px;
      width:min(520px, 92vw);
      box-shadow: 0 18px 70px rgba(0,0,0,.14);
      text-align:center;
    }
    .title{
      font-weight:900;
      color:#ff2d55;
      margin:0 0 6px;
      letter-spacing:.2px;
    }
    .sub{
      margin:0;
      color:#444;
    }

    /* Modal */
    .overlay{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.45);
      padding:18px;
      z-index:10;
    }

    .modal{
      width:min(520px, 95vw);
      background:white;
      border-radius:18px;
      padding:22px 18px;
      box-shadow: 0 24px 80px rgba(0,0,0,.25);
      animation: popIn .22s ease forwards;
      text-align:center;
    }
    @keyframes popIn{
      from { opacity:0; transform: translateY(12px) scale(.98); }
      to { opacity:1; transform: translateY(0) scale(1); }
    }

    .emoji{
      font-size:2rem;
      margin-bottom:8px;
    }

    h2{
      margin:0 0 10px;
      font-size:1.35rem;
    }
    p{
      margin:0 0 14px;
      line-height:1.5;
      color:#333;
    }

    .buttons{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:6px;
      position:relative;
      min-height:54px;
    }

    button{
      border:0;
      cursor:pointer;
      padding:12px 18px;
      border-radius:14px;
      font-weight:900;
      font-size:1rem;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform 160ms ease, box-shadow 160ms ease;
    }
    button:active{ transform: scale(.98); }

    .yes{
      background: linear-gradient(135deg, #ff2d55, #ff5c8a);
      color:white;
      box-shadow: 0 14px 34px rgba(255,45,85,.25);
    }
    .no{
      background:#f1f1f3;
      color:#333;
      box-shadow: 0 10px 24px rgba(0,0,0,.08);
    }

    /* YES scaling for valentine question */
    #valYesBtn{
      transform: scale(var(--yesScale));
      transform-origin: center;
    }

    .hint{
      margin-top:10px;
      color:#666;
      font-size:.95rem;
      min-height:1.2em;
    }

    .footerNote{
      margin-top:10px;
      color:#777;
      font-size:.85rem;
    }

    /* Final photo styling */
    .finalPhoto{
      width:100%;
      max-height:300px;
      object-fit:cover;
      border-radius:16px;
      box-shadow: 0 16px 45px rgba(0,0,0,.18);
      margin: 10px 0 12px;
      display:block;
    }
  </style>
</head>

<body>
  <div class="fairies" id="fairies"></div>

  <div class="card">
    <h1 class="title">Open the surprise üíó</h1>
    <p class="sub">Tap the buttons to continue.</p>
  </div>

  <!-- Modal overlay -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="emoji" id="mEmoji">üíå</div>
      <h2 id="mTitle">I have something to share‚Ä¶</h2>
      <div id="mTextWrap">
        <p id="mText">Are you free right now?</p>
      </div>

      <div class="buttons" id="mButtons"></div>
      <div class="hint" id="hint"></div>
      <div class="footerNote" id="note"></div>
    </div>
  </div>

  <!-- ‚úÖ Music file: put song.mp3 in the SAME folder as index.html -->
  <audio id="bgMusic" preload="auto" loop>
    <source src="song.mp3" type="audio/mpeg">
  </audio>

  <script>
    // ========= Moving fairy background =========
    const fairies = document.getElementById("fairies");
    function spawnFairy(){
      const f = document.createElement("div");
      f.className = "fairy";
      f.textContent = "üßöüèª";
      f.style.left = Math.floor(Math.random()*100) + "vw";
      f.style.fontSize = (22 + Math.random()*18) + "px";
      f.style.animationDuration = (6 + Math.random()*7) + "s";
      fairies.appendChild(f);
      setTimeout(() => f.remove(), 14000);
    }
    setInterval(spawnFairy, 380);

    // ========= Modal state machine =========
    const overlay = document.getElementById("overlay");
    const mEmoji = document.getElementById("mEmoji");
    const mTitle = document.getElementById("mTitle");
    const mTextWrap = document.getElementById("mTextWrap");
    const mText = document.getElementById("mText");
    const mButtons = document.getElementById("mButtons");
    const hint = document.getElementById("hint");
    const note = document.getElementById("note");
    const bgMusic = document.getElementById("bgMusic");

    let noCount = 0;
    let yesScale = 1;

    function setYesScale(v){
      yesScale = v;
      document.documentElement.style.setProperty("--yesScale", yesScale);
    }

    function clearUI(){
      mButtons.innerHTML = "";
      hint.textContent = "";
      note.textContent = "";
      // Reset text area to simple paragraph unless we override with HTML
      mTextWrap.innerHTML = `<p id="mText"></p>`;
    }

    function addButton(label, className, onClick, id=null){
      const b = document.createElement("button");
      b.textContent = label;
      b.className = className;
      if (id) b.id = id;
      b.addEventListener("click", onClick);
      mButtons.appendChild(b);
      return b;
    }

    // Try play music (safe)
    function tryPlayMusic(){
      bgMusic.currentTime = 0;
      const p = bgMusic.play();
      if (p) p.catch(() => {});
    }

    // Screen 1: Are you free?
    function screen1(){
      clearUI();
      mEmoji.textContent = "üíå";
      mTitle.textContent = "I have something very important to share‚Ä¶";
      document.getElementById("mText").textContent = "Are you free right now?";

      addButton("Yes", "yes", () => screen3());
      addButton("No", "no", () => screen2());
    }

    // Screen 2: If she clicks NO first
    function screen2(){
      clearUI();
      mEmoji.textContent = "üò§";
      mTitle.textContent = "No? Really?";
      document.getElementById("mText").textContent = "I told you it‚Äôs something serious. Just press YES.";

      addButton("Yes", "yes", () => screen3());
      note.textContent = "You cannot escape this one üôÇ";
    }

    // Screen 3: Appreciation message + Next
    function screen3(){
      clearUI();
      mEmoji.textContent = "ü•∫";
      mTitle.textContent = "Something I want to say‚Ä¶";
      document.getElementById("mText").textContent =
        "No matter how hard the time was, you stood for me and i promise i will stay for you. Whatever is going on i will always hold your hand i promise that.There‚Äôs nothing more adorable than you.";

      addButton("Next", "yes", () => screen4());
      note.textContent = "Tap Next üíó";
    }

    // Screen 4: Valentine question with YES/NO logic
    function screen4(){
      clearUI();
      mEmoji.textContent = "üíò";
      mTitle.textContent = "Akhri sawal‚Ä¶";
      document.getElementById("mText").textContent = "Will you be my Valentine Meri PARRII?";

      noCount = 0;
      setYesScale(1);

      addButton("YES üíñ", "yes", () => screen5(), "valYesBtn");
      const noBtn = addButton("NO üôÉ", "no", () => {
        noCount += 1;

        // Grow YES
        setYesScale(Math.min(yesScale + 0.35, 6));

        const messages = [
          "Are you sure? üò≥",
          "Think again‚Ä¶ ü§®",
          "That NO is suspicious‚Ä¶ üòÖ",
          "The YES is looking very clickable üëÄ",
          "You‚Äôre making YES powerful üí™üíñ",
          "Ok‚Ä¶ you know what to do üòå"
        ];
        hint.textContent = messages[(noCount - 1) % messages.length];

        // After a few NO clicks, make NO dodge around
        if (noCount >= 5) {
          const area = mButtons.getBoundingClientRect();
          const btn  = noBtn.getBoundingClientRect();
          const maxX = Math.max(0, area.width - btn.width);
          const maxY = Math.max(0, area.height - btn.height);

          noBtn.style.position = "absolute";
          noBtn.style.left = Math.floor(Math.random()*(maxX+1)) + "px";
          noBtn.style.top  = Math.floor(Math.random()*(maxY+1)) + "px";
        }
      });

      note.textContent = "Choose wisely üôÇ";
    }

    // Screen 5: Final love message + ONE PHOTO + MUSIC
    // ‚úÖ Put final.jpg in the SAME folder as index.html
    function screen5(){
      clearUI();

      // Play the song when final YES happens
      tryPlayMusic();

      mEmoji.textContent = "ü•∞";
      mTitle.textContent = "I love you so much meri jaan. I hope you liked it";

      // Show one photo + message
      mTextWrap.innerHTML = `
        <p style="margin:0 0 12px; line-height:1.5; color:#333; font-weight:700;">
          Thank you for being there for me always. ‚ù§Ô∏è
        </p>

        <img src="final.jpg" alt="final photo" class="finalPhoto" />

        <p style="margin:0; font-weight:900; color:#ff2d55;">
          Happy Valentine‚Äôs Day üíê
        </p>
      `;

      addButton("Close üíó", "yes", () => {
        overlay.style.display = "none";
        bgMusic.pause(); // optional: stop when closed
      });

      note.textContent = "This is just for you.";
    }

    // Start
    screen1();
  </script>
</body>
</html>
